<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style type="text/css">
body{ height:3500px;}
#content{ background:green; margin:10px;}
</style>
</head>

<body>
http://www.7160.com/uploads/allimg/140618/9-14061Q11150.jpg<br>
<br><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
http://www.7160.com/uploads/allimg/140618/9-14061Q11153.jpg
<div id="content" style="width:150px; height:150px;"><img realImg="http://www.7160.com/uploads/allimg/140618/9-14061Q11153.jpg" width="150" height="150" src="T85.gif"></div>
<div id="content" style="width:150px; height:150px;"><img realImg="http://www.7160.com/uploads/allimg/140618/9-14061Q11150.jpg" width="150" height="150" src="T85.gif"></div>
<div id="content" style="width:150px; height:150px;"><img realImg="http://img.1985t.com/uploads/attaches/2012/08/6900-pHbmUQ.jpg" width="150" height="150" src="T85.gif"></div>
<div id="content" style="width:150px; height:150px;"><img realImg="http://img.7160.com/uploads/allimg/140618/9-14061Q11158.jpg" width="150" height="150" src="T85.gif"></div>
<div id="content" style="width:150px; height:150px;"><img realImg="http://img.7160.com/uploads/allimg/140618/9-14061Q11201.jpg" width="150" height="150" src="T85.gif"></div>
<div id="content" style="width:150px; height:150px;"><img realImg="http://img.7160.com/uploads/allimg/140618/9-14061Q11213.jpg" width="150" height="150" src="T85.gif"></div>
</body>
</html>
<script>
function offset(ele){//计算出ele元素距离浏览器最左和最上边的偏移量来
	var l=ele.offsetLeft;
	var t=ele.offsetTop;
	var p=ele.offsetParent;
	while(p){
		//通过用户代理属性判断是不是IE8浏览器
		if(window.navigator.userAgent.indexOf("MSIE 8")>-1){
			l+=p.offsetLeft;
			t+=p.offsetTop;		
		}else{
			l+=p.offsetLeft+p.clientLeft;
			t+=p.offsetTop+p.clientTop;//加边框的宽
		}
		p=p.offsetParent;
	}
	return {left:l,top:t}
}
for(var i=0;i<content.length;i++){
	content[i].t=offset(content[i]).top	
}

window.onscroll=function(){
	var bottom=(document.documentElement.scrollTop||document.body.scrollTop)+(document.documentElement.clientHeight||document.body.clientHeight);
	for(var i=0;i<content.length;i++){
		var ele=content[i];
		loadImg(ele,bottom);
		
	}
}

function loadImg(ele,bottom){
	var oImg=ele.getElementsByTagName("img").item(0);
		if(oImg.loaded)return;//如果已经加载成功了，结束本次函数的执行
		
		if(ele.t<bottom){
			var tempImg=new Image;			
			var realImg=oImg.getAttribute("realImg")+"?"+Math.random();//用来操作扩展的HTML属性的
			oImg.id//DHTML，如果HTML标签的属性是w3法定的，则直接打点操作
			tempImg.src=realImg;
			oImg.src="o_loading.gif";
			tempImg.onload=function(){//问题出在这个函数里：当循环执行完成时，这个函数还没有执行呢，结果就oImg不再是循环当次执行的那个oImg了
				oImg.src=realImg;
				oImg.loaded=true;
			}
		}		
}
</script>
